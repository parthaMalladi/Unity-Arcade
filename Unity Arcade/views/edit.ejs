<%- include("partials/header.ejs") %>

<div class="full-screen container mt-4">
    <% for (let i = 0; i < checklist.length; i++) { %>

        <div class="card mb-3">
            <div class="card-body">
                <h5 class="card-title" style="color: #ffc107; font-weight: bold;"><%= checklist[i].title %></h5>
        
                <div class="d-flex align-items-center mb-2">
                    <p id="desc<%=checklist[i].id%>" class="mb-0 me-2"><%= checklist[i].description %></p>
        
                    <button id="descBtn<%=checklist[i].id%>" class="btn btn-secondary btn-sm" onclick="descHandler('<%= checklist[i].id %>')">Edit Description</button>
        
                    <form action="/editDesc" method="post" class="d-flex ms-2">
                        <input type="hidden" name="updatedItemId" value="<%= checklist[i].id %>">
        
                        <input id="descInput<%= checklist[i].id %>" class="form-control me-2" type="text" name="updatedDesc" value="<%= checklist[i].description %>" autocomplete="off" autofocus="true" hidden="true" style="width: 600px;">
        
                        <button id="descDone<%= checklist[i].id %>" class="btn btn-secondary btn-sm" type="submit" hidden>Submit</button>
                    </form>
                </div>

                <div class="d-flex align-items-center mb-2">
                    <p id="url<%=checklist[i].id%>" class="mb-0 me-2"><%= checklist[i].url %></p>
        
                    <button id="urlBtn<%=checklist[i].id%>" class="btn btn-secondary btn-sm" onclick="urlHandler('<%= checklist[i].id %>')">Edit URL</button>
        
                    <form action="/editURL" method="post" class="d-flex ms-2">
                        <input type="hidden" name="updatedItemId" value="<%= checklist[i].id %>">
        
                        <input id="urlInput<%= checklist[i].id %>" class="form-control me-2" type="url" name="updatedUrl" value="<%= checklist[i].url %>" autocomplete="off" autofocus="true" hidden="true" style="width: 600px;">
        
                        <button id="urlDone<%= checklist[i].id %>" class="btn btn-secondary btn-sm" type="submit" hidden>Submit</button>
                    </form>
                </div>
        
                <form action="/delete" method="post" class="mt-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" onchange="this.form.submit()" name="itemId" value="<%= checklist[i].id %>">
                        <label class="form-check-label">
                            Delete Game
                        </label>
                    </div>
                </form>
            </div>
        </div>
        
    <% } %>
</div>

<script>
    function descHandler(id) {
      document.getElementById("desc" + id).setAttribute("hidden", true)
      document.getElementById("descBtn" + id).setAttribute("hidden", true)
      document.getElementById("descInput" + id).removeAttribute("hidden")
      document.getElementById("descDone" + id).removeAttribute("hidden")
    }

    function urlHandler(id) {
      document.getElementById("url" + id).setAttribute("hidden", true)
      document.getElementById("urlBtn" + id).setAttribute("hidden", true)
      document.getElementById("urlInput" + id).removeAttribute("hidden")
      document.getElementById("urlDone" + id).removeAttribute("hidden")
    }
</script>


<%- include("partials/footer.ejs") %>